(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class y{constructor(){this.STORAGE_KEY="donem3_grades"}save(e){try{return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),!0}catch(t){return console.warn("LocalStorage'a kaydetme hatası:",t),!1}}load(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){return console.warn("LocalStorage'dan yükleme hatası:",e),null}}clear(){try{return localStorage.removeItem(this.STORAGE_KEY),!0}catch(e){return console.warn("LocalStorage'dan silme hatası:",e),!1}}exists(){try{return localStorage.getItem(this.STORAGE_KEY)!==null}catch{return!1}}saveGrade(e,t){const a=this.load()||{};return t==null||t===""?delete a[e]:a[e]=t,this.save(a)}loadGrade(e){const t=this.load();return t?t[e]:null}}const g=new y,x={professionalism:2,pregnancy:5,tumors:5,respiratoryCirculatory:6,trauma:5,infection:5,endocrine:5,digestive:5,aging:5,neuropsychiatry:5,elective:4},b=52,i=["professionalism","pregnancy","tumors","respiratoryCirculatory","trauma","infection","endocrine","digestive","aging","neuropsychiatry","elective"],s=69.5;function u(){let n=0,e=!1;return i.forEach(t=>{const a=document.getElementById(t),r=parseFloat(a.value);if(!isNaN(r)&&r>=0&&r<=100){const o=x[t],l=r*o/b;n+=l,e=!0}}),e?Math.round(n*100)/100:0}function p(){const n=u(),e=parseFloat(document.getElementById("finalExam").value)||0,t=parseFloat(document.getElementById("pdo").value)||0,a=parseFloat(document.getElementById("mdu").value)||0,o=(n*.5+e*.25+t*.1+a*.1)*1.05;return Math.round(o*100)/100}function E(){const n=u(),e=parseFloat(document.getElementById("pdo").value)||0,t=parseFloat(document.getElementById("mdu").value)||0;if(n===0)return null;const a=n*.5+e*.1+t*.1,o=(s/1.05-a)/.25,m=Math.max(o,59.5);return Math.max(0,Math.min(100,m))}function c(){const n=u(),e=document.getElementById("blockGrade");n>0?(e.textContent=`${n}`,e.className="text-3xl font-semibold text-emerald-200"):(e.textContent="Notlar girilmemiş",e.className="text-lg font-medium text-slate-300"),f(),d(),G()}function f(){const n=p(),e=document.getElementById("generalAverage"),t=parseFloat(document.getElementById("finalExam").value)||0,a=59.5;n>0?(e.textContent=n.toFixed(2),!isNaN(t)&&t>0&&t<a?e.className="text-5xl font-bold text-red-400 mb-2":!isNaN(t)&&t>0&&n>=s&&t>=a?e.className="text-5xl font-bold text-emerald-400 mb-2":e.className="text-5xl font-bold text-transparent bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text mb-2"):(e.textContent="--",e.className="text-5xl font-bold text-transparent bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text mb-2"),d(),h()}function d(){const n=E(),e=document.getElementById("requiredFinalScore"),t=59.5,a=document.getElementById("requiredScoreTitle"),r=document.getElementById("requiredScoreValue"),o=document.getElementById("finalBarrierText");if(n===null){r.textContent="---";return}const l=document.getElementById("finalExam"),m=parseFloat(l.value);isNaN(m)||l.value===""?n<=100?(r.textContent=n.toFixed(1),a.className="text-purple-200 font-medium",r.className="text-2xl font-bold text-purple-100 mt-1"):(r.textContent=`${n.toFixed(1)} puan gerekli`,e.className="bg-red-500/20 rounded-lg p-3 border border-red-400/30",a.textContent="Uyarı: Mevcut notlarla geçmek mümkün değil",a.className="text-red-200 font-medium",r.className="text-lg font-bold text-red-100 mt-1",o.className="text-sm text-red-300 mt-1"):(r.textContent=`${n.toFixed(1)}`,a.className="text-purple-200 font-medium",r.className="text-2xl font-bold text-purple-100 mt-1",o.textContent=`Final barajı: ${t}`,o.className="text-sm text-purple-300 mt-1")}function I(n){return n>=90?{letter:"AA",coefficient:"4,00",degree:"PEKİYİ"}:n>=85?{letter:"BA",coefficient:"3,50",degree:"PEKİYİ"}:n>=80?{letter:"BB",coefficient:"3,00",degree:"İYİ"}:n>=75?{letter:"CB",coefficient:"2,50",degree:"İYİ"}:n>=70?{letter:"CC",coefficient:"2,00",degree:"ORTA"}:{letter:"FF",coefficient:"0,00",degree:"BAŞARISIZ"}}function v(){const n=p(),e=parseFloat(document.getElementById("finalExam").value)||0,t=u(),a=59.5;if(n===0||t===0)return null;if(isNaN(e)||e===0)return n>=s?{type:"info",message:"Final notu bekleniyor",detail:"Mevcut ortalama geçme notunun üzerinde"}:{type:"warning",message:"Final notu bekleniyor",detail:"Geçmek için final notu gerekli"};if(e<a)return{type:"fail",message:"Final barajından kaldı",detail:`Final notu ${a}'in altında (${e})`};if(n<s)return{type:"fail",message:"Ortalamadan dolayı kaldı",detail:`Genel ortalama ${s}'in altında (${n.toFixed(2)})`};const r=I(n);return{type:"pass",message:"Geçti",detail:`${r.letter} (${r.coefficient}) - ${r.degree}`}}function h(){const n=document.getElementById("statusInfo"),e=document.getElementById("statusText"),t=document.getElementById("gradeInfo"),a=v();if(!a){n.classList.add("hidden");return}switch(n.classList.remove("hidden"),e.textContent=a.message,t.textContent=a.detail,n.className="mt-4 p-4 rounded-lg border transition-all duration-300",a.type){case"pass":n.classList.add("bg-green-500/20","border-green-400/50"),e.className="text-lg font-semibold mb-2 text-green-200",t.className="text-sm opacity-75 text-green-300";break;case"fail":n.classList.add("bg-red-500/20","border-red-400/50"),e.className="text-lg font-semibold mb-2 text-red-200",t.className="text-sm opacity-75 text-red-300";break;case"warning":n.classList.add("bg-yellow-500/20","border-yellow-400/50"),e.className="text-lg font-semibold mb-2 text-yellow-200",t.className="text-sm opacity-75 text-yellow-300";break;case"info":n.classList.add("bg-blue-500/20","border-blue-400/50"),e.className="text-lg font-semibold mb-2 text-blue-200",t.className="text-sm opacity-75 text-blue-300";break}}function N(){i.forEach(a=>{const r=document.getElementById(a);r&&(r.value="")}),["pdo","mdu","finalExam"].forEach(a=>{const r=document.getElementById(a);r&&(r.value="")});const e=document.getElementById("requiredScoreValue");e&&(e.textContent="---");const t=document.getElementById("statusInfo");t&&t.classList.add("hidden"),g.clear(),c()}function G(){const n={};i.forEach(t=>{const a=document.getElementById(t);a&&a.value&&(n[t]=a.value)}),["pdo","mdu","finalExam"].forEach(t=>{const a=document.getElementById(t);a&&a.value&&(n[t]=a.value)}),g.save(n)}function S(){const n=g.load();return n?(i.forEach(t=>{const a=document.getElementById(t);a&&n[t]&&(a.value=n[t])}),["pdo","mdu","finalExam"].forEach(t=>{const a=document.getElementById(t);a&&n[t]&&(a.value=n[t])}),!0):!1}document.addEventListener("DOMContentLoaded",function(){i.forEach(t=>{const a=document.getElementById(t);a&&(a.addEventListener("input",c),a.addEventListener("change",c))}),["pdo","mdu","finalExam"].forEach(t=>{const a=document.getElementById(t);a&&(a.addEventListener("input",function(){f(),t==="finalExam"&&d()}),a.addEventListener("change",function(){f(),t==="finalExam"&&d()}))});const e=document.getElementById("clearBtn");e&&e.addEventListener("click",N),S(),c()});particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5}},opacity:{value:.1,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.1,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0});
